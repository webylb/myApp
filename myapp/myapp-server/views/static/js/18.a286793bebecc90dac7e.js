webpackJsonp([18],{"0oJD":function(t,o){},"1QJ5":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e("hhm8"),s=e("qwAB"),i=e("S6Pc"),n=e("nJwn"),r=e("T452"),c=e("mtWM"),d=e.n(c),u=e("mw3O"),l=e.n(u);var h=e("y/jF"),g={name:"classify",data:function(){return{goodsList:[],currentPage:1,pageSize:10,showLoad:!0,loadingTitle:"正在加载...",num:0}},components:{Scroll:s.a,GoodsItem:i.a,ShopHeader:n.a,Loading:h.a},activated:function(){this.getShopCount()},created:function(){this.getShopCount(),this.getGoodsList({currentPage:this.currentPage,pageSize:this.pageSize,categoryId:this.$route.query.categoryId})},methods:{getShopCount:function(){var t=this;d.a.post(r.a.API.SHOP_COUNT).then(function(t){return t.data}).then(function(o){o.code&&"00"===o.code?(t.num=o.result.count,console.log(o,"dasdasdsadass")):o.code&&"01"===o.code?a.a.toWeiXinLogin(window.location.href):t.$toastBox.showToastBox(o.message)}).catch(function(o){t.$toastBox.showToastBox(o)})},toShopCar:function(){this.$router.push({path:"/shopCar"})},loadMore:function(){this.showLoad||this.hasMore||this.getGoodsList({currentPage:this.currentPage,pageSize:this.pageSize,categoryId:this.$route.query.categoryId})},loadImage:function(){this.$refs.classifyScroll.refresh()},toDetail:function(t){this.$router.push({path:"/commodityDetails",query:{commodityId:t}})},getGoodsList:function(t){var o=this;this.showLoad=!0,function(t){return d.a.post(r.a.API.ITEM_GOODS_LIST,l.a.stringify({pageIndex:t.currentPage,pageSize:t.pageSize,categoryId:t.categoryId})).then(function(t){return t.data})}(t).then(function(t){t.code&&"00"===t.code?(document.title=t.message,o.loadingTitle="",o.currentPage++,o.showLoad=!1,o.goodsList=o.goodsList.concat(t.result.data),o.goodsList.length>=t.result.amount&&(o.hasMore=!0)):t.code&&"01"===t.code?a.a.toWeiXinLogin(window.location.href):o.$toastBox.showToastBox(t.message)}).catch(function(t){o.$toastBox.showToastBox(t)})}}},m={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"classify"},[e("scroll",{ref:"classifyScroll",staticClass:"classifyScroll",attrs:{pullup:!0,data:t.goodsList},on:{scrollToEnd:t.loadMore}},[e("div",[e("div",{staticClass:"goods-wrapper"},t._l(t.goodsList,function(o){return e("goods-item",{key:o.id,staticClass:"goods-item",attrs:{data:o},on:{toDetail:t.toDetail,loadImage:t.loadImage}})}),1),t._v(" "),e("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoad,expression:"showLoad"}],staticStyle:{padding:"1rem 0"},attrs:{title:t.loadingTitle}})],1)]),t._v(" "),e("div",{staticClass:"shop-car",on:{click:t.toShopCar}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.num<10,expression:"num<10"}],staticClass:"num"},[t._v(t._s(t.num))]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.num>9,expression:"num>9"}],staticClass:"num1"},[t._v(t._s(t.num))])])],1)},staticRenderFns:[]};var f=e("VU/8")(g,m,!1,function(t){e("0oJD")},"data-v-6e7d261a",null);o.default=f.exports}});
//# sourceMappingURL=18.a286793bebecc90dac7e.js.map