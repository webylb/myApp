webpackJsonp([6],{"6dAi":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("hhm8"),i=e("nJwn"),a=e("KlOE"),o={name:"delet-bar",props:{allNum:{type:Number,default:0},num:{type:Number,default:0}},methods:{changeAll:function(){this.$emit("changeAll")},delet:function(){this.$emit("delet")}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"delete-bar"},[e("div",{staticClass:"num"},[e("i",{staticClass:"iconfont",class:t.num==t.allNum?"active":" ",domProps:{innerHTML:t._s(t.num==t.allNum?"&#xe633;":"&#xe62e;")},on:{click:t.changeAll}}),t._v(" 全选")]),t._v(" "),e("div",{staticClass:"delet",on:{click:t.delet}},[t._v(t._s(t.num?"删除商品("+t.num+")":"删除商品"))])])},staticRenderFns:[]};var r=e("VU/8")(o,h,!1,function(t){e("vyl8")},"data-v-3450cc26",null).exports,c={name:"no-result",props:{title:{type:String,default:""},imgUrl:{type:String,default:""}}},l={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"no-result"},[s("img",{attrs:{src:this.imgUrl,alt:""}}),this._v(" "),s("p",[this._v(this._s(this.title))])])},staticRenderFns:[]};var u=e("VU/8")(c,l,!1,function(t){e("ip1Q")},"data-v-a5551e10",null).exports,m={name:"delet-bar",props:{allNum:{type:Number,default:0},num:{type:Number,default:0},price:{type:String,default:""}},methods:{changeAll:function(){this.$emit("changeAll")},close:function(){this.$emit("close")}}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"close-bar"},[e("div",{staticClass:"num"},[e("i",{staticClass:"iconfont",class:t.num==t.allNum?"active":" ",domProps:{innerHTML:t._s(t.num==t.allNum?"&#xe633;":"&#xe62e;")},on:{click:t.changeAll}}),t._v(" 全选")]),t._v(" "),e("div",{staticClass:"delet",style:0===t.num?"background-color:#999":"background-color:#ff4800",on:{click:t.close}},[t._v(t._s(t.num?"结算("+t.num+")":"结算"))]),t._v(" "),e("div",{staticClass:"price"},[t._v("合计: "),e("span",[t._v(t._s(t.price))])])])},staticRenderFns:[]};var p=e("VU/8")(m,d,!1,function(t){e("UPsj")},"data-v-3ed054d0",null).exports,v=e("qwAB"),g=e("vtWP"),f=e("T452"),w=e("mtWM"),L=e.n(w),_=e("mw3O"),C=e.n(_);var x=e("gmrX"),$=e.n(x),N={name:"shop-car",data:function(){return{shopList:[],allChange:!1,num:0,mode:0,price:"￥0",showLoad:!1,img:$.a,showInit:!1}},components:{ShopHeader:i.a,Scroll:v.a,Store:g.a,DeletBar:r,CloseBar:p,LoadServer:a.a,NoResult:u},created:function(){document.title=this.$route.meta.title,this.getShopCar()},methods:{getUpNum:function(t,s,e){var i=this;this.showLoad=!0,function(t){return L.a.post(f.a.API.UP_NUM,C.a.stringify({sku:t.sku,num:t.num})).then(function(t){return t.data})}(t).then(function(t){if(t.code&&"00"===t.code){i.showLoad=!1,i.shopList[e].num=s?i.shopList[e].num+1:i.shopList[e].num-1;for(var a=0,o=0,h=0;h<i.shopList.length;h++)i.shopList[h].change&&(a+=i.shopList[h].singleCashPrice*i.shopList[h].num,o+=i.shopList[h].singleMinPayTb*i.shopList[h].num),i.price=0===a&&0===o?"￥0":n.a.priceStr(o,a)}else t.code&&"01"===t.code?n.a.toWeiXinLogin(window.location.href):i.$toastBox.showToastBox(t.message)}).catch(function(t){i.$toastBox.showToastBox(t)})},minus:function(t){return!this.showLoad&&(this.shopList[t].num<=1?(this.$toastBox.showToastBox("购买数量不能小于1"),!1):void this.getUpNum({sku:this.shopList[t].sku,num:this.shopList[t].num-1},!1,t))},add:function(t){if(this.showLoad)return!1;this.getUpNum({sku:this.shopList[t].sku,num:this.shopList[t].num+1},!0,t)},changeMode:function(){0===this.mode?this.mode=1:this.mode=0},close:function(){var t=[];this.shopList.filter(function(s,e,n){s.change&&t.push(s.id)}),t.length>0&&(console.log(t),this.$router.push({path:"/purchaseNow",query:{cartIds:t.join(",")}}))},delet:function(){var t,s=this,e=[];this.shopList.filter(function(t,s,n){t.change&&e.push(t.sku)}),e.length>0&&(t={skus:e.join(",")},L.a.post(f.a.API.DELET_SHOP,C.a.stringify({skus:t.skus})).then(function(t){return t.data})).then(function(t){t.code&&"00"===t.code?(s.shopList=s.shopList.filter(function(t,s,e){return!t.change}),s.price="￥0",s.num=0):t.code&&"01"===t.code?n.a.toWeiXinLogin(window.location.href):s.$toastBox.showToastBox(t.message)}).catch(function(t){s.$toastBox.showToastBox(t)})},changeAll:function(){var t=0,s=0;if(this.allChange=!this.allChange,this.allChange){this.num=this.shopList.length;for(var e=0;e<this.shopList.length;e++)t+=this.shopList[e].singleCashPrice*this.shopList[e].num,s+=this.shopList[e].singleMinPayTb*this.shopList[e].num,this.price=n.a.priceStr(s,t)}else this.price="￥0",this.num=0;for(e=0;e<this.shopList.length;e++)this.shopList[e].change=this.allChange},change:function(t){var s=0,e=0;this.num=0,this.allChange=!1,this.shopList[t].change=!this.shopList[t].change,this.$forceUpdate();for(var i=0,a=0;a<this.shopList.length;a++)this.shopList[a].change&&(s+=this.shopList[a].singleCashPrice*this.shopList[a].num,e+=this.shopList[a].singleMinPayTb*this.shopList[a].num,i++,this.num=i),this.price=n.a.priceStr(e,s);i===this.shopList.length&&(this.allChange=!0)},getShopCar:function(){var t=this;L.a.post(f.a.API.SHOP_CAR).then(function(t){return t.data}).then(function(s){if(s.code&&"00"===s.code){t.shopList=s.result.cartList,t.showInit=!0;for(var e=0;e<t.shopList.length;e++)t.shopList[e].change=!1;console.log(t.shopList)}else s.code&&"01"===s.code?n.a.toWeiXinLogin(window.location.href):t.$toastBox.showToastBox(s.message)}).catch(function(s){t.$toastBox.showToastBox(s)})}}},y={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shop-car"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.shopList.length>0,expression:"shopList.length>0"}],staticClass:"shop-car-title"},[e("span",[t._v("共"+t._s(t.shopList.length)+"件商品")]),e("span",{staticClass:"manage",on:{click:t.changeMode}},[t._v(t._s(0===t.mode?"管理":"完成"))])]),t._v(" "),e("scroll",{directives:[{name:"show",rawName:"v-show",value:t.shopList.length>0,expression:"shopList.length>0"}],staticClass:"car-scroll"},[e("div",[e("store",{attrs:{"all-change":t.allChange,data:t.shopList},on:{minus:t.minus,add:t.add,changeAll:t.changeAll,change:t.change}})],1)]),t._v(" "),e("delet-bar",{directives:[{name:"show",rawName:"v-show",value:1===t.mode&&t.shopList.length>0,expression:"mode===1&&shopList.length>0"}],attrs:{"all-num":t.shopList.length,num:t.num},on:{changeAll:t.changeAll,delet:t.delet}}),t._v(" "),e("close-bar",{directives:[{name:"show",rawName:"v-show",value:0===t.mode&&t.shopList.length>0,expression:"mode===0&&shopList.length>0"}],attrs:{num:t.num,"all-num":t.shopList.length,price:t.price},on:{close:t.close,changeAll:t.changeAll}}),t._v(" "),e("load-server",{directives:[{name:"show",rawName:"v-show",value:t.showLoad,expression:"showLoad"}]}),t._v(" "),e("no-result",{directives:[{name:"show",rawName:"v-show",value:t.shopList.length<=0&&t.showInit,expression:"shopList.length<=0 && showInit"}],attrs:{"img-url":t.img,title:"您的购物车空空如也~"}})],1)},staticRenderFns:[]};var P=e("VU/8")(N,y,!1,function(t){e("IR9Y")},"data-v-6cd6477e",null);s.default=P.exports},"8rWN":function(t,s){},"9Pyr":function(t,s){},IR9Y:function(t,s){},KlOE:function(t,s,e){"use strict";var n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"load-server"},[s("svg",{attrs:{"xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.0",width:"2.188rem",height:"2.188rem",viewBox:"0 0 128 128","xml:space":"preserve"}},[s("g",{attrs:{transform:"rotate(330 64 64)"}},[s("path",{attrs:{d:"M64 0a7 7 0 1 1-7 7 7 7 0 0 1 7-7zm29.86 12.2a2.8 2.8 0 1 1-3.83 1.02 2.8 2.8 0 0 1 3.83-1.02zm22.16 21.68a3.15 3.15 0 1 1-4.3-1.15 3.15 3.15 0 0 1 4.3 1.15zm.87 60.53a4.2 4.2 0 1 1-1.57-5.7 4.2 4.2 0 0 1 1.54 5.73zm7.8-30.5a3.85 3.85 0 1 1-3.85-3.85 3.85 3.85 0 0 1 3.85 3.84zm-30 53.2a4.55 4.55 0 1 1 1.66-6.23 4.55 4.55 0 0 1-1.67 6.22zM64 125.9a4.9 4.9 0 1 1 4.9-4.9 4.9 4.9 0 0 1-4.9 4.9zm-31.06-8.22a5.25 5.25 0 1 1 7.17-1.93 5.25 5.25 0 0 1-7.14 1.93zM9.9 95.1a5.6 5.6 0 1 1 7.65 2.06A5.6 5.6 0 0 1 9.9 95.1zM1.18 63.9a5.95 5.95 0 1 1 5.95 5.94 5.95 5.95 0 0 1-5.96-5.94zm8.1-31.6a6.3 6.3 0 1 1 2.32 8.6 6.3 6.3 0 0 1-2.3-8.6zM32.25 8.87a6.65 6.65 0 1 1-2.44 9.1 6.65 6.65 0 0 1 2.46-9.1z",fill:"#666"}}),s("animateTransform",{attrs:{attributeName:"transform",type:"rotate",values:"0 64 64;30 64 64;60 64 64;90 64 64;120 64 64;150 64 64;180 64 64;210 64 64;240 64 64;270 64 64;300 64 64;330 64 64",calcMode:"discrete",dur:"1s",repeatCount:"indefinite"}})],1)])])},staticRenderFns:[]};var i=e("VU/8")({name:"load-server"},n,!1,function(t){e("9Pyr")},"data-v-6d0f5b7c",null);s.a=i.exports},UPsj:function(t,s){},gmrX:function(t,s,e){t.exports=e.p+"static/img/no_shop.97895de.png"},ip1Q:function(t,s){},"qK/+":function(t,s){},vtWP:function(t,s,e){"use strict";var n={name:"shop-car-num",props:{num:{type:Number,default:1}},methods:{minus:function(){this.$emit("minus")},add:function(){this.$emit("add")}}},i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"shop-car-num"},[s("div",{staticClass:"minus",on:{click:this.minus}},[this._v("-")]),s("div",[this._v(this._s(this.num))]),s("div",{staticClass:"add",on:{click:this.add}},[this._v("+")])])},staticRenderFns:[]};var a=e("VU/8")(n,i,!1,function(t){e("qK/+")},"data-v-4a246766",null).exports,o=e("hhm8"),h={name:"store",props:{data:{type:Array,default:[]},allChange:{type:Boolean,default:!1},showChange:{type:Boolean,default:!0}},methods:{add:function(t){this.$emit("add",t),this.$forceUpdate()},minus:function(t){this.$emit("minus",t),this.$forceUpdate()},priceTxt:function(t,s){return console.log(t,s),o.a.priceStr(t,s)},change:function(t){this.$emit("change",t),this.$forceUpdate()},changeAll:function(){this.$emit("changeAll")}},components:{ShopCarNum:a}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"store"},[e("div",{staticClass:"store-name"},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.showChange,expression:"showChange"}],staticClass:"iconfont",class:t.allChange?"active":" ",domProps:{innerHTML:t._s(t.allChange?"&#xe633;":"&#xe62e;")},on:{click:t.changeAll}}),t._v("袋鼠自营商城全场包邮\n  ")]),t._v(" "),t._l(t.data,function(s,n){return e("div",{staticClass:"store-item"},[e("div",{staticClass:"item-change"},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.showChange,expression:"showChange"}],staticClass:"iconfont",class:s.change?"active":" ",domProps:{innerHTML:t._s(s.change?"&#xe633;":"&#xe62e;")},on:{click:function(s){return t.change(n)}}})]),t._v(" "),e("div",{staticClass:"item-img"},[e("img",{attrs:{src:s.cover,alt:""}})]),t._v(" "),e("div",{staticClass:"item-info"},[e("p",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),e("p",{staticClass:"type"},[t._v("规格："+t._s(s.specValueStr))]),t._v(" "),e("p",{staticClass:"price"},[t._v(t._s(t.priceTxt(s.singleMinPayTb,s.singleCashPrice)))]),t._v(" "),e("p",{staticClass:"num-wrapper"},[t._v("原价："+t._s(s.singleOldPrice))]),t._v(" "),e("shop-car-num",{staticClass:"shop-num",attrs:{num:s.num},on:{minus:function(s){return t.minus(n)},add:function(s){return t.add(n)}}})],1)])})],2)},staticRenderFns:[]};var c=e("VU/8")(h,r,!1,function(t){e("8rWN")},"data-v-278b805e",null);s.a=c.exports},vyl8:function(t,s){}});
//# sourceMappingURL=6.a5dff5ea747e61570883.js.map