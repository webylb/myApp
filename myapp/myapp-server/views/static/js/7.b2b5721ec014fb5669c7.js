webpackJsonp([7],{"+32e":function(t,e){},"+Q22":function(t,e){},"/lZI":function(t,e,s){"use strict";var i=s("GQaK");function n(t,e){if(!function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}(t,e)){var s=t.className.split(" ");s.push(e),t.className=s.join(" ")}}var a=document.createElement("div").style;!function(){var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==a[t[e]])return e}();var o={data:function(){return{dots:[],currentPageIndex:0}},props:{loop:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!0},interval:{type:Number,default:4e3},isClick:{type:Boolean,default:!1}},mounted:function(){var t=this;setTimeout(function(){t._setSliderWidth(),t._initDots(),t._initSlider()},20),this.autoPlay&&this._play(),window.addEventListener("resize",function(){if(!t.slider)return 0;t._setSliderWidth(!0),t.slider.refresh()})},methods:{_setSliderWidth:function(t){this.children=this.$refs.sliderGroup.children;for(var e=0,s=this.$refs.slider.clientWidth,i=0;i<this.children.length;i++){var a=this.children[i];n(a,"slider-item"),a.style.width=s+"px",e+=s}this.loop&&!t&&(e+=2*s),this.$refs.sliderGroup.style.width=e+"px"},_initDots:function(){this.dots=new Array(this.children.length)},_initSlider:function(){var t=this;this.slider=new i.a(this.$refs.slider,{scrollX:!0,scrollY:!1,momentum:!1,snap:{loop:this.loop,threshold:.3,speed:400},click:this.isClick}),this.slider.on("scrollEnd",function(){var e=t.slider.getCurrentPage().pageX;t.currentPageIndex=e,t.autoPlay&&(clearTimeout(t.timer),t._play())})},_play:function(){var t=this;this.timer=setTimeout(function(){t.slider.next()},this.interval)}},destroyed:function(){clearTimeout(this.timer)}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"slider",staticClass:"slider"},[s("div",{ref:"sliderGroup",staticClass:"slider-group"},[t._t("default")],2),t._v(" "),s("div",{staticClass:"dots"},t._l(t.dots,function(e,i){return s("span",{key:i,staticClass:"dot",class:{active:t.currentPageIndex===i}})}),0)])},staticRenderFns:[]};var r=s("VU/8")(o,c,!1,function(t){s("mj9P")},"data-v-57a4ab1a",null);e.a=r.exports},"5fPQ":function(t,e){},"66pK":function(t,e){},"6tAD":function(t,e){},"8dtF":function(t,e){},GGBJ:function(t,e){},Pnjt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("hhm8"),n=s("nJwn"),a=s("qwAB"),o=s("/lZI"),c={name:"return-money",props:{data:{type:Object,default:null}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.data?s("div",{staticClass:"return-money"},[s("div",{staticClass:"return-info"},[s("div",{staticClass:"return-main"},[s("div",{staticClass:"return-top"},[s("span",{staticClass:"tip"},[t._v("返现")]),t._v(" "),s("p",{staticClass:"des"},[t._v("最多可返"),s("span",[t._v(t._s(t.data.maxReturnTb))]),t._v("通宝")])]),t._v(" "),s("div",{staticClass:"return-bottom"},[t._v("返还规则：为实付现金的"+t._s(t.data.returnTbRate)+"%")])])])]):t._e()},staticRenderFns:[]};var d=s("VU/8")(c,r,!1,function(t){s("66pK")},"data-v-fe31edee",null).exports,l={name:"commodity-des",props:{data:{type:Object,default:null}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"commodity-des"},[e("div",{staticClass:"des-wrapper"},[e("div",{staticClass:"des-info"},[e("p",[this._v("商品详情")]),this._v(" "),this.data?e("div",{domProps:{innerHTML:this._s(this.data.content)}}):this._e()])])])},staticRenderFns:[]};var h=s("VU/8")(l,u,!1,function(t){s("XHT6")},"data-v-7f46cb7c",null).exports,m={name:"change-kind",props:{kindTxt:{type:String,default:"请选择规格"}},methods:{change:function(){this.$emit("change")}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"change-kind"},[s("div",{staticClass:"change-wrapper",on:{click:t.change}},[s("div",{staticClass:"change-info"},[s("div",{staticClass:"change"},[t._v("选择")]),t._v(" "),s("div",{staticClass:"kind"},[t._v(t._s(t.kindTxt))]),t._v(" "),t._m(0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip"},[e("i",{staticClass:"iconfont"},[this._v("")])])}]};var v=s("VU/8")(m,f,!1,function(t){s("6tAD")},"data-v-5b88e599",null).exports,p={name:"bottom-bar",props:{num:{type:Number,default:0}},methods:{add:function(){this.$emit("add")},by:function(){this.$emit("by")},toService:function(){this.$emit("toService")},toShopCar:function(){this.$emit("toShopCar")}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-bar"},[s("div",{staticClass:"bar-left"},[s("div",{staticClass:"service",on:{click:t.toService}},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),s("p",[t._v("联系客服")])]),t._v(" "),s("div",{staticClass:"shopping-trolley",on:{click:t.toShopCar}},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),s("p",[t._v("购物车")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.num<10,expression:"num<10"}],staticClass:"num"},[t._v(t._s(t.num))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.num>9,expression:"num>9"}],staticClass:"num1"},[t._v(t._s(t.num))])])]),t._v(" "),s("div",{staticClass:"bar-right"},[s("div",{staticClass:"add",on:{click:t.add}},[t._v("\n      加入购物车\n    ")]),t._v(" "),s("div",{staticClass:"by",on:{click:t.by}},[t._v("\n      立即购买\n    ")])])])},staticRenderFns:[]};var g=s("VU/8")(p,_,!1,function(t){s("8dtF")},"data-v-69705d81",null).exports,C={name:"change-num",props:{num:{type:Number,default:1}},methods:{minus:function(){this.$emit("minus")},add:function(){this.$emit("add")}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"change-num"},[e("div",{staticClass:"minus",on:{click:this.minus}},[this._v("-")]),e("div",[this._v(this._s(this.num))]),e("div",{staticClass:"add",on:{click:this.add}},[this._v("+")])])},staticRenderFns:[]};var w=s("VU/8")(C,y,!1,function(t){s("+32e")},"data-v-d221995c",null).exports,x={name:"change",props:{price:{type:Object,default:null},imgUrl:{type:String,default:""},type:{type:Number,default:1},data:{type:Array,default:function(){return[]}},change:{type:String,default:""},num:{type:Number,default:1}},components:{Scroll:a.a,ChangeNum:w},methods:{priceTxt:function(t,e){return i.a.priceStr(t,e)},confirm:function(t){this.$emit("confirm",t)},handleKind:function(t,e,s){this.$emit("handleKind",{a:t,b:e,c:s}),this.$forceUpdate()},refresh:function(){this.$refs.changeScroll.refresh()},close:function(){this.$emit("close")},minus:function(){this.$emit("minus")},add:function(){this.$emit("add")}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"change"},[s("div",{staticClass:"change-wrapper"},[s("div",{staticClass:"change-title"},[s("img",{attrs:{src:t.imgUrl,alt:""}}),t._v(" "),s("i",{staticClass:"iconfont close",on:{click:t.close}},[t._v("")]),t._v(" "),s("p",{staticClass:"price"},[t._v(t._s(t.priceTxt(t.price.minPayTb,t.price.cashPrice)))]),t._v(" "),s("p",{staticClass:"kind"},[t._v(t._s(t.change))])]),t._v(" "),s("scroll",{ref:"changeScroll",staticClass:"change-main",attrs:{data:t.data}},[s("div",[t._l(t.data,function(e,i){return s("div",{key:e.id,staticClass:"item-wrapper"},[s("div",{staticClass:"title"},[t._v(t._s(e.specName))]),t._v(" "),s("div",{staticClass:"title-kind"},t._l(e.specValList,function(n){return s("span",{class:n.specValue===e.change?"active":"",on:{click:function(e){return t.handleKind(n.specValue,i,n.id)}}},[t._v(t._s(n.specValue))])}),0)])}),t._v(" "),s("div",{staticClass:"change-num-wrapper"},[s("span",[t._v("购买数量")]),t._v(" "),s("change-num",{attrs:{num:t.num},on:{minus:t.minus,add:t.add}})],1)],2)]),t._v(" "),s("div",{staticClass:"change-btn"},[s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.type||3===t.type,expression:"type===2||type===3"}],staticClass:"confirm",on:{click:function(e){return t.confirm(0)}}},[t._v("确定")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.type,expression:"type===1"}],staticClass:"two-wrapper"},[s("div",{staticClass:"one",on:{click:function(e){return t.confirm(2)}}},[t._v("加入购物车")]),t._v(" "),s("div",{staticClass:"two",on:{click:function(e){return t.confirm(3)}}},[t._v("立即购买")])])])],1)])])},staticRenderFns:[]};var T=s("VU/8")(x,k,!1,function(t){s("5fPQ")},"data-v-0cc39a35",null).exports,$={name:"commodity-des-details-title",props:{data:{type:Object,default:null}},methods:{priceTxt:function(t,e){return i.a.priceStr(t,e)}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.data?s("div",{staticClass:"commodity-details-title"},[s("div",{staticClass:"price-wrapper"},[s("div",{staticClass:"present-price"},[s("p",{staticClass:"num"},[t._v(t._s(t.priceTxt(t.data.minPayTb,t.data.cashPrice)))]),t._v(" "),s("p",{staticClass:"txt"},[t._v("支持通宝抵扣")]),t._v(" "),s("p",{staticClass:"txt"},[t._v("包邮")])]),t._v(" "),s("div",{staticClass:"original-price"},[t._v("\n        市场价：￥"+t._s(t.data.oldPrice)+"\n      ")])]),t._v(" "),s("div",{staticClass:"commodity-name"},[s("div",{staticClass:"commodity-title"},[t._v("\n        "+t._s(t.data.title)+"\n      ")]),t._v(" "),s("div",{staticClass:"commodity-des"},[t._v("\n        "+t._s(t.data.subTitle)+"\n      ")])])]):t._e()},staticRenderFns:[]};var S=s("VU/8")($,b,!1,function(t){s("+Q22")},"data-v-48031af7",null).exports,B=s("T452"),N=s("mtWM"),A=s.n(N),L=s("mw3O"),P=s.n(L);var I={name:"commodity-des-details",data:function(){return{swiperList:[],detail:null,showChange:!1,kindTxt:"请选择规格",specList:[],type:1,change1:"",num:1,imgUrl:"",shopNum:0}},components:{ShopHeader:n.a,Slider:o.a,Scroll:a.a,CommodityDetailsTitle:S,ReturnMoney:d,ChangeKind:v,CommodityDes:h,BottomBar:g,Change:T},created:function(){this.getShopCount(),document.title=this.$route.meta.title,this.getRecommendGoods({itemId:this.$route.query.commodityId})},methods:{getShopCount:function(){var t=this;A.a.post(B.a.API.SHOP_COUNT).then(function(t){return t.data}).then(function(e){e.code&&"00"===e.code?(t.shopNum=e.result.count,console.log(e,"dasdasdsadass")):e.code&&"01"===e.code?i.a.toWeiXinLogin(window.location.href):t.$toastBox.showToastBox(e.message)}).catch(function(e){t.$toastBox.showToastBox(e)})},toService:function(){window.location.href="https://ww16.53kf.com/m.php?cid=72187208&style=1&keyword=http%3A%2F%2Ftest.51jujibao.com%3A8080%2F&referer=http%3A%2F%2Fm.51jujibao.com%2Fv2%2Findex.html%23%2Fcenter&guest_id=10562525909006&tpl=crystal_blue&uid=1827a2a86496d5a9c9a1617ea6489f0b&u_stat_id=&talktitle=%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83&tfrom=50&device=&zdkf_type=1&kf=&kflist=off"},toShopCar:function(){this.$router.push({path:"/shopCar"})},getSku:function(t){var e=this;(function(t){return A.a.post(B.a.API.GET_SKU,P.a.stringify({specVals:t.specVals})).then(function(t){return t.data})})(t).then(function(t){t.code&&"00"===t.code?(e.imgUrl=t.result.cover,e.sku=t.result.id,e.detail.minPayTb=t.result.minPayTb,e.detail.cashPrice=t.result.cashPrice):t.code&&"01"===t.code?i.a.toWeiXinLogin(window.location.href):e.$toastBox.showToastBox(t.message)}).catch(function(t){e.$toastBox.showToastBox(t)})},joinShopCar:function(t){var e=this;(function(t){return A.a.post(B.a.API.JION_CAR,P.a.stringify({sku:t.sku,num:t.num})).then(function(t){return t.data})})(t).then(function(t){t.code&&"00"===t.code?(e.getShopCount(),e.showChange=!1):t.code&&"01"===t.code?i.a.toWeiXinLogin(window.location.href):e.$toastBox.showToastBox(t.message)}).catch(function(t){e.$toastBox.showToastBox(t)})},confirm:function(t){0===t?2===this.type?this.idArr?(console.log(this.idArr),console.log(this.num),this.joinShopCar({sku:this.sku,num:this.num}),console.log("加入购物车")):this.$toastBox.showToastBox("请选择规格"):3===this.type&&(this.idArr?(console.log(this.idArr),console.log(this.num),this.$router.push({path:"/purchaseNow",query:{sku:this.sku,num:this.num}}),console.log("立即购买")):this.$toastBox.showToastBox("请选择规格")):2===t?this.idArr?(console.log(this.idArr),console.log(this.num),this.joinShopCar({sku:this.sku,num:this.num}),console.log("加入购物车")):this.$toastBox.showToastBox("请选择规格"):3===t&&(this.idArr?(console.log(this.idArr),console.log(this.num),this.$router.push({path:"/purchaseNow",query:{sku:this.sku,num:this.num}}),console.log("立即购买")):this.$toastBox.showToastBox("请选择规格"))},addNum:function(){this.num++},minus:function(){this.num<=1?this.$toastBox.showToastBox("购买数量不能小于1"):this.num--},handleKind:function(t){this.specList[t.b].change=t.a,this.specList[t.b].changeId=t.c;for(var e="请选择",s="全选",i=[],n=0;n<this.specList.length;n++)""===this.specList[n].change?e=e+" "+this.specList[n].specName:(i.push(this.specList[n].changeId),s=s+" "+this.specList[n].change);"请选择"===e?(this.idArr=i,this.getSku({specVals:i.join(",")}),this.change1=s,this.kindTxt=s):this.change1=e},add:function(){var t=this;this.type=2,this.showChange=!0,setTimeout(function(){t.$refs.change.refresh()},20)},by:function(){var t=this;this.type=3,this.showChange=!0,setTimeout(function(){t.$refs.change.refresh()},20)},close:function(){this.showChange=!1},change:function(){var t=this;this.type=1,this.showChange=!0,setTimeout(function(){t.$refs.change.refresh()},20)},loadImage:function(){this.checkloaded||(this.checkloaded=!0,this.$refs.commodityScroll.refresh())},getRecommendGoods:function(t){var e=this;(function(t){return A.a.post(B.a.API.COMMODITY_DETAILS,P.a.stringify({itemId:t.itemId})).then(function(t){return t.data})})(t).then(function(t){if(t.code&&"00"===t.code){var s=t.result;e.imgUrl=s.cover,e.swiperList=s.sliderImgList,e.detail=s;var n=e;if(setTimeout(function(){var t=document.getElementById("article-box").getElementsByTagName("img");if(t.length>0)for(var e=0;e<t.length;e++)t[e].onload=function(){n.$refs.commodityScroll.refresh()}},20),e.specList=s.specList,s.specNum>0){for(var a="请选择",o=0;o<e.specList.length;o++)e.specList[o].change="",e.specList[o].changeId="",a=a+" "+e.specList[o].specName;e.change1=a,console.log(e.change1)}}else t.code&&"01"===t.code?i.a.toWeiXinLogin(window.location.href):e.$toastBox.showToastBox(t.message)}).catch(function(t){e.$toastBox.showToastBox(t)})}}},E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.detail?s("div",{staticClass:"commodity-details"},[s("scroll",{ref:"commodityScroll",staticClass:"commodity-scroll"},[s("div",[t.swiperList.length?s("div",{ref:"sliderWrapper",staticClass:"slider-wrapper"},[s("slider",{attrs:{loop:!1,"auto-play":!1}},t._l(t.swiperList,function(e){return s("div",[s("img",{staticClass:"needsclick",attrs:{src:e},on:{load:t.loadImage}})])}),0)],1):t._e(),t._v(" "),s("commodity-details-title",{attrs:{data:t.detail}}),t._v(" "),"Y"===t.detail.needReturnTb?s("return-money",{attrs:{data:t.detail}}):t._e(),t._v(" "),0!==t.detail.specNum?s("change-kind",{attrs:{"kind-txt":t.kindTxt},on:{change:t.change}}):t._e(),t._v(" "),s("commodity-des",{attrs:{id:"article-box",data:t.detail}})],1)]),t._v(" "),s("bottom-bar",{attrs:{num:t.shopNum},on:{toShopCar:t.toShopCar,toService:t.toService,add:t.add,by:t.by}}),t._v(" "),0!==t.detail.specNum?s("change",{directives:[{name:"show",rawName:"v-show",value:t.showChange,expression:"showChange"}],ref:"change",attrs:{price:t.detail,imgUrl:t.imgUrl,num:t.num,change:t.change1,data:t.specList,type:t.type},on:{confirm:t.confirm,minus:t.minus,add:t.addNum,handleKind:t.handleKind,close:t.close}}):t._e()],1):t._e()},staticRenderFns:[]};var F=s("VU/8")(I,E,!1,function(t){s("GGBJ")},"data-v-208f3d19",null);e.default=F.exports},XHT6:function(t,e){},mj9P:function(t,e){}});
//# sourceMappingURL=7.b2b5721ec014fb5669c7.js.map