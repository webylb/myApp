webpackJsonp([14],{"8stH":function(t,e,a){"use strict";e.b=function(t){return o.a.post(i.a.API.SEARCH_GOODS_LIST,r.a.stringify({pageIndex:t.currentPage,pageSize:t.pageSize,keywords:t.itemName})).then(function(t){return t.data})},e.a=function(t){return o.a.post(i.a.API.LIKE_GOODS,r.a.stringify({pageIndex:t.currentPage,pageSize:t.pageSize})).then(function(t){return t.data})};var i=a("T452"),s=a("mtWM"),o=a.n(s),n=a("mw3O"),r=a.n(n)},"9D1C":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xo6T"),s=a("S6Pc"),o=a("y/jF"),n=a("qwAB"),r=a("S7d+"),c=a("8stH"),l=a("hhm8"),u={name:"search-details",data:function(){return{value:"",currentPage:1,pageSize:10,list:[],loadingTitle:"正在加载...",showLoad:!0,noSearch:!1}},created:function(){document.title=this.$route.meta.title,this.value=this.$route.query.search,this.getSearch({currentPage:this.currentPage,pageSize:this.pageSize,itemName:this.$route.query.search})},components:{GoodsSearchBar:i.a,GoodsItem:s.a,Loading:o.a,Scroll:n.a,YouLike:r.a},methods:{toDetail:function(t){this.$router.push({path:"/commodityDetails",query:{commodityId:t}})},loadImage:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.$refs.searchScroll.refresh()},500)},getLikeGoods:function(t){var e=this;this.showLoad=!0,c.a(t).then(function(t){t.code&&"00"===t.code?(e.list=e.list.concat(t.result.data),e.loadingTitle="",e.showLoad=!1,e.currentPage++,e.list.length>=t.result.amount&&(e.hasMore=!0)):t.code&&"01"===t.code?l.a.toWeiXinLogin(window.location.href):e.$toastBox.showToastBox(t.message)}).catch(function(t){e.$toastBox.showToastBox(t)})},loadMore:function(){if(this.noSearch)return this.showLoad||this.hasMore||this.getLikeGoods({currentPage:this.currentPage,pageSize:this.pageSize}),!1;this.showLoad||this.hasMore||this.getSearch({currentPage:this.currentPage,pageSize:this.pageSize,itemName:this.$route.query.search})},getSearch:function(t){var e=this;this.showLoad=!0,c.b(t).then(function(t){if(t.code&&"00"===t.code){if(0===t.result.amount)return e.noSearch=!0,e.getLikeGoods({currentPage:e.currentPage,pageSize:e.pageSize}),!1;e.list=e.list.concat(t.result.data),e.loadingTitle="",e.showLoad=!1,e.currentPage++,e.list.length>=t.result.amount&&(e.hasMore=!0)}else t.code&&"01"===t.code?l.a.toWeiXinLogin(window.location.href):e.$toastBox.showToastBox(t.message)}).catch(function(t){e.$toastBox.showToastBox(t)})},goBack:function(){this.$router.push({path:"/"})},handleClick:function(){this.$router.push({path:"/search",query:{searchWord:this.$route.query.search}})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-detail"},[a("goods-search-bar",{attrs:{"input-disabled":!0,placeholder:"请输入你喜欢的商品名称"},on:{handleClick:t.handleClick,goBack:t.goBack},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("scroll",{ref:"searchScroll",staticClass:"search-scroll",attrs:{pullup:!0,data:t.list},on:{scrollToEnd:t.loadMore}},[a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.noSearch,expression:"noSearch"}],staticClass:"no-search"},[a("div",{staticClass:"no-title"},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"0.75rem",color:"#ff4800"}},[t._v("")]),t._v("没找到你想要的商品，可以看看下方为你推荐~\n        ")]),t._v(" "),a("you-like",{staticClass:"you-like"})],1),t._v(" "),a("div",{staticClass:"list-wrapper"},[a("div",{staticClass:"list"},t._l(t.list,function(e){return a("goods-item",{key:e.id,staticClass:"list-item",attrs:{data:e},on:{toDetail:t.toDetail,loadImage:t.loadImage}})}),1)]),t._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoad,expression:"showLoad"}],staticClass:"loading",attrs:{title:t.loadingTitle}})],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(u,h,!1,function(t){a("DaZM")},"data-v-8d5f23e4",null);e.default=d.exports},DaZM:function(t,e){},QPJI:function(t,e){},xo6T:function(t,e,a){"use strict";var i={name:"goods-search-bar",props:{value:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},methods:{search:function(){this.$emit("search")},goBack:function(){this.$emit("goBack")},handleClick:function(){this.$emit("handleClick")}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-serach-bar"},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"0.875rem","vertical-align":"middle"},on:{click:t.goBack}},[t._v("")]),t._v(" "),a("div",{staticClass:"input-wrapper",on:{click:t.handleClick}},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"0.75rem"}},[t._v("")]),t._v(" "),a("input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{type:"text",disabled:t.inputDisabled,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search",on:{click:t.search}},[t._v("搜索")])])},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(t){a("QPJI")},"data-v-3cf1d0a7",null);e.a=o.exports}});
//# sourceMappingURL=14.2bfbd5bb45e4f2c887f4.js.map