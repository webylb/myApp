webpackJsonp([10],{"5p+a":function(o,t,a){"use strict";var e=a("hhm8"),n={name:"coupon-item",props:{coupondata:{type:Object,default:null},valid:{type:Boolean,default:!0}},created:function(){this.coupondata.card&&this.coupondata.pwd?this.copyText=this.coupondata.card+"  "+this.coupondata.pwd:!this.coupondata.card&&this.coupondata.pwd&&(this.copyText=this.coupondata.pwd)},data:function(){return{copyText:"",openText:!1,createTime:"",expireTime:""}},methods:{timeFormat:function(o){return e.a.formatDate(o)},handleItem:function(){this.$emit("handleItem",{item:this.data})},onCopySuccess:function(){this.$toastBox.showToastBox("复制成功")},onCopyError:function(){this.$toastBox.showToastBox("复制失败")},openDirectionForUse:function(){this.openText=!this.openText,this.$emit("showDesText")},showQrcode:function(){this.$couponToastBox.showToastBox(this.coupondata.pictureCode)}}},s={render:function(){var o=this,t=o.$createElement,a=o._self._c||t;return a("div",{class:["coupon-item",o.valid?"coupon-valid-item":"coupon-invalid-item"],on:{click:o.handleItem}},[a("div",{staticClass:"exchange-date"},[a("span",{staticClass:"exchange-topText"},[o._v("兑换时间:")]),a("span",[o._v(" "+o._s(o.timeFormat(o.coupondata.createTime)))])]),o._v(" "),a("div",{staticClass:"coupon-info"},[a("div",{staticClass:"coupon-img"},[a("img",{attrs:{src:o.coupondata.itemPicture,alt:""}})]),o._v(" "),a("div",{staticClass:"coupon-detail"},[a("h2",{staticClass:"coupon-title"},[o._v(o._s(o.coupondata.itemName))]),o._v(" "),a("div",{staticClass:"coupon-vaild-date"},[o._v("有效期至 "+o._s(o.timeFormat(o.coupondata.expireTime)))]),o._v(" "),o.coupondata.card&&o.coupondata.pwd?a("div",{staticClass:"coupon-num"},[o._v("卡号: "+o._s(o.coupondata.card))]):o._e(),o._v(" "),o.coupondata.card&&o.coupondata.pwd?a("div",{staticClass:"coupon-pwd"},[o._v("密码: "+o._s(o.coupondata.pwd))]):o._e(),o._v(" "),o.coupondata.card||!o.coupondata.pwd?o._e():a("div",{staticClass:"coupon-camilo"},[o._v("卡密: "+o._s(o.coupondata.pwd))]),o._v(" "),o.coupondata.pictureCode?a("div",{staticClass:"coupon-qrcode"},[a("span",{on:{click:o.showQrcode}},[o._v("点击查看卡券")])]):o._e()]),o._v(" "),o.coupondata.pictureCode?o._e():a("div",{staticClass:"coupon-option"},[a("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:o.copyText,expression:"copyText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:o.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:o.onCopyError,expression:"onCopyError",arg:"error"}],staticClass:"coupon-copy",attrs:{type:"button"}},[o._v("复制")])])]),o._v(" "),a("div",{staticClass:"coupon-direction-for-use"},[a("div",{staticClass:"coupon-dfu-button",on:{click:o.openDirectionForUse}},[a("div",{},[a("p",[o._v("使用说明\n        "),o.openText?a("span",[a("i",{staticClass:"iconfont"},[o._v("")])]):a("span",[a("i",{staticClass:"iconfont"},[o._v("")])])])])]),o._v(" "),o.coupondata.pictureCode?o._e():a("div",{staticClass:"coupon-dfu-link"},[a("a",{attrs:{href:o.coupondata.goToUse}},[o._v("点击去使用")])])]),o._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:o.openText,expression:"openText"}],staticClass:"coupon-dfu-text",domProps:{innerHTML:o._s(o.coupondata.useTip)}},[o._v("\n      "+o._s(o.coupondata.useTip)+"\n  ")])])},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(o){a("VwJg")},"data-v-f97f3000",null);t.a=i.exports},NO0O:function(o,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("qwAB"),n=a("nJwn"),s=a("5p+a"),i=a("PzZ/"),c=a("y/jF"),r=a("hhm8"),d={name:"validCoupon",data:function(){return{valid:!1,couponsList:[],currentPage:1,pageSize:10,showLoad:!1,noCoupon:!1,loadingTitle:"正在加载..."}},components:{Scroll:e.a,ShopHeader:n.a,couponItem:s.a,Loading:c.a},created:function(){document.title=this.$route.meta.title,this.getInvalidCouponsList({currentPage:this.currentPage,pageSize:this.pageSize})},mounted:function(){window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1))},destroyed:function(){window.removeEventListener("popstate",this.goBack,!1)},methods:{goBack:function(){this.$couponToastBox.hideToastBox(),window.history.back()},loadMore:function(){this.showLoad||this.hasMore||this.getInvalidCouponsList({currentPage:this.currentPage,pageSize:this.pageSize})},loadImage:function(){this.$refs.validCouponScroll.refresh()},showDesText:function(){this.$refs.validCouponScroll.refresh()},handleItem:function(){console.log("点击了")},getInvalidCouponsList:function(o){var t=this;this.showLoad=!0,i.b(o).then(function(o){o.code&&"00"===o.code?(t.loadingTitle="",t.currentPage++,t.showLoad=!1,t.couponsList=t.couponsList.concat(o.result.data),t.couponsList.length>=o.result.amount&&(t.hasMore=!0),t.couponsList.length<1&&(t.noCoupon=!0)):o.code&&"01"===o.code?r.a.toWeiXinLogin(window.location.href):(t.showLoad=!1,t.$toastBox.showToastBox(o.message))})}}},p={render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"validCoupon"},[e("scroll",{ref:"validCouponScroll",staticClass:"validCouponScroll",staticStyle:{top:"3.375rem"},attrs:{pullup:!0},on:{scrollToEnd:o.loadMore}},[e("div",[e("div",[o._l(o.couponsList,function(t){return e("coupon-item",{key:t.id,staticClass:"nav-item",attrs:{coupondata:t,valid:o.valid},on:{handleItem:o.handleItem,showDesText:o.showDesText}})}),o._v(" "),e("loading",{directives:[{name:"show",rawName:"v-show",value:o.showLoad,expression:"showLoad"}],staticStyle:{padding:"1rem 0"},attrs:{title:o.loadingTitle}})],2),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:o.noCoupon,expression:"noCoupon"}],staticClass:"no-coupon"},[e("div",{staticClass:"no-coupon-content fadeIn"},[e("img",{attrs:{src:a("V2Fo"),alt:"no coupon"}}),o._v(" "),e("p",{staticClass:"no-coupon-text"},[o._v("您还没有任何失效卡券")])])])])])],1)},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(o){a("nW4X")},"data-v-a4f43cd2",null);t.default=u.exports},"PzZ/":function(o,t,a){"use strict";t.a=function(o){return s.a.post(e.a.API.GETALLCOUPON,c.a.stringify({pageIndex:o.currentPage,pageSize:o.pageSize})).then(function(o){return o.data})},t.b=function(o){return s.a.post(e.a.API.GETINVALIDCOUPON,c.a.stringify({pageIndex:o.currentPage,pageSize:o.pageSize})).then(function(o){return o.data})};var e=a("T452"),n=a("mtWM"),s=a.n(n),i=a("mw3O"),c=a.n(i)},V2Fo:function(o,t,a){o.exports=a.p+"static/img/no-coupon.80a0e13.png"},VwJg:function(o,t){},nW4X:function(o,t){}});
//# sourceMappingURL=10.410d7884e0cadbea4a7a.js.map